if(!chatScrollControl)var chatScrollControl={};if(!chatScrollControl.initialized){chatScrollControl.initialized=true;chatScrollControl.toggle=true;chatScrollControl.button=$("<span/>").text("Autoscroll").html('A<span class="toggle-label">uto</span>s<span class="toggle-label">croll</span>').attr("title","Toggle Autoscroller").prop("id","scrollChatToggle").addClass("pointer label label-info pull-right").appendTo("#chatheader");chatScrollControl.button.click(function(){if(chatScrollControl.toggle){chatScrollControl.toggle=false;chatScrollControl.button.addClass("label-default").removeClass("label-info")}else{chatScrollControl.toggle=true;chatScrollControl.button.removeClass("label-default").addClass("label-info")}});function scrollChat(){if(!chatScrollControl.toggle){return}$("#messagebuffer").scrollTop($("#messagebuffer").prop("scrollHeight"))}}if(!this[CHANNEL.name].loaded_scroll){this[CHANNEL.name].loaded_scroll=true;socket.on("setAFK",scrollChat);socket.on("chatMsg",function(data){if(data.msg.indexOf("<a")!=-1||data.msg.indexOf("<img")!=-1){setTimeout(scrollChat,500)}})}